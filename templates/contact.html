{% extends "base.html" %}

{% block title %}Contact Us - Esra Innovate{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css">
{% endblock %}

{% block content %}
<!-- MATTR-style hero section -->
<div class="business-services-hero">
    {% set active_page = 'contact' %}
    {% include "menu.html" %}
    
    <div class="container">
        <div class="hero-content">
            <h1>Contact Us</h1>
            <p>Ready to start your AI journey? Get in touch with us for personalized guidance, training programs, or to discuss how AI can transform your business.</p>
        </div>
    </div>
</div>

<!-- Contact Form Section -->
<section class="solutions-overview" style="padding: 60px 0 40px 0;">
    <div class="container">
        <div class="section-header" style="margin-bottom: 40px;">
            <h2>Get in Touch</h2>
            <p class="section-subtitle">Fill out the form below and we'll get back to you within 24 hours. Whether you're interested in AI training, business solutions, or just want to learn more, we're here to help.</p>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="contact-form-container" style="background: white; border-radius: 12px; padding: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid #e9ecef;">
                    <div class="text-center mb-4">
                        <h3 style="color: #00204a; margin-bottom: 10px;">Contact Form</h3>
                        <p style="color: #666;">Complete the form below to get started</p>
                    </div>
                    
                    <div class="google-form-container" style="display: flex; justify-content: center;">
                        <iframe 
                            src="https://docs.google.com/forms/d/e/1FAIpQLSf8EpfLzJsKRESGhdVeXG_OLS2SG6sN36Z_e28K0aGPzrVE5Q/viewform?embedded=true" 
                            width="100%" 
                            height="750" 
                            frameborder="0" 
                            marginheight="0" 
                            marginwidth="0"
                            style="max-width: 640px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            Loading…
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Methods Section - Compact Design -->
<section class="why-choose-section" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 60px 0;">
    <div class="container">
        <div class="section-header" style="margin-bottom: 40px;">
            <h2>Other Ways to Connect</h2>
            <p class="section-subtitle">Prefer a different way to reach us? We're available through multiple channels to make it easy for you to get in touch.</p>
        </div>
        
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card" style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); height: 100%; text-align: center; transition: all 0.3s ease; border: 1px solid #e9ecef;">
                    <div class="feature-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #00bbf0, #007fa4); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto;">
                        <img src="{{ url_for('static', filename='images/_phoneai.png') }}" alt="" style="width: 35px; height: 35px; object-fit: contain; filter: brightness(0) invert(1);">
                    </div>
                    <h5 style="color: #00204a; font-weight: 600; margin-bottom: 15px; font-size: 1.2rem;">Phone</h5>
                    <p style="color: #666; font-size: 0.9rem; line-height: 1.5; margin-bottom: 20px;">For quick questions or immediate assistance, call us directly. We typically respond within the same day during business hours.</p>
                    <a href="tel:+64212381611" class="btn1" style="margin-top: 0; display: inline-block; padding: 12px 25px; font-size: 0.9rem;">Call Us Directly</a>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card" style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); height: 100%; text-align: center; transition: all 0.3s ease; border: 1px solid #e9ecef;">
                    <div class="feature-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #00bbf0, #007fa4); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto;">
                        <img src="{{ url_for('static', filename='images/ai_powered_writing.png') }}" alt="" style="width: 35px; height: 35px; object-fit: contain; filter: brightness(0) invert(1);">
                    </div>
                    <h5 style="color: #00204a; font-weight: 600; margin-bottom: 15px; font-size: 1.2rem;">Email</h5>
                    <p style="color: #666; font-size: 0.9rem; line-height: 1.5; margin-bottom: 20px;">Send us a detailed email for comprehensive inquiries, project proposals, or to schedule a consultation.</p>
                    <a href="mailto:info@esra.co.nz?subject=AI%20Services%20Inquiry" class="btn1" style="margin-top: 0; display: inline-block; padding: 12px 25px; font-size: 0.9rem;">info@esra.co.nz</a>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card" style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); height: 100%; text-align: center; transition: all 0.3s ease; border: 1px solid #e9ecef;">
                    <div class="feature-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #00bbf0, #007fa4); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto;">
                        <img src="{{ url_for('static', filename='images/ai_power_video.png') }}" alt="" style="width: 35px; height: 35px; object-fit: contain; filter: brightness(0) invert(1);">
                    </div>
                    <h5 style="color: #00204a; font-weight: 600; margin-bottom: 15px; font-size: 1.2rem;">Phone</h5>
                    <p style="color: #666; font-size: 0.9rem; line-height: 1.5; margin-bottom: 20px;">Prefer to talk? Call us directly for a personal conversation about your AI needs and how we can help.</p>
                    <a href="tel:+64212381611" class="btn1" style="margin-top: 0; display: inline-block; padding: 12px 25px; font-size: 0.9rem;">021 238 1611</a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block footer %}
  {% set footer_title = 'Ready to Get Started?' %}
  {% set footer_content = '
  <p>Whether you\'re a business looking to implement AI solutions or an individual wanting to learn AI skills, we\'re here to help you succeed.</p>
  <p>Contact us today to discuss your needs and discover how AI can transform your work and life.</p>
  ' %}
  {% include "includes/footer.html" %}
{% endblock %}

{% block scripts %}
<!-- Google Dialogflow Chat Bot -->
<df-messenger
  location="australia-southeast1"
  project-id="esra-website"
  agent-id="c99e4dd7-b110-4c76-8f5d-64b473c595fd"
  language-code="en"
  max-query-length="-1">
  <df-messenger-chat
    chat-title="Esra Innovate Agent">
  </df-messenger-chat>
</df-messenger>

<style>
  df-messenger {
    z-index: 999;
    position: fixed;
    --df-messenger-font-color: #000;
    --df-messenger-font-family: Google Sans;
    --df-messenger-chat-background: #f3f6fc;
    --df-messenger-message-user-background: #d3e3fd;
    --df-messenger-message-bot-background: #fff;
    --df-messenger-button-titlebar-color: #00204a;
    --df-messenger-button-titlebar-font-color: #fff;
    --df-messenger-chat-titlebar-color: #00204a;
    --df-messenger-chat-titlebar-font-color: #fff;
    bottom: 0;
    right: 0;
    top: 50vh;
    width: 50vw;
    min-width: 200px;
    max-width: 300px;
    height: 50vh;
    box-shadow: -5px 0 20px rgba(0,0,0,0.1);
    border-left: 3px solid #00bbf0;
    transition: all 0.3s ease;
  }
  
  df-messenger.minimized {
    top: calc(100vh - 60px);
    height: 60px;
  }
  
  /* Make chat more visible on mobile */
  @media (max-width: 768px) {
    df-messenger {
      width: 100vw;
      min-width: 100vw;
      max-width: 100vw;
      top: 50vh;
      height: 50vh;
    }
    
    df-messenger.minimized {
      top: calc(100vh - 60px);
      height: 60px;
    }
  }
</style>

<script>
// Add minimize functionality with more reliable approach
document.addEventListener('DOMContentLoaded', function() {
  let minimizeBtn = null;
  
  function createMinimizeButton() {
    if (minimizeBtn) return;
    
    minimizeBtn = document.createElement('button');
    minimizeBtn.innerHTML = '−';
    minimizeBtn.id = 'chat-minimize-btn';
    minimizeBtn.title = 'Minimize Chat';
    minimizeBtn.style.cssText = `
      position: fixed;
      top: 51vh;
      right: 15px;
      background: #00bbf0;
      color: white;
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      border: 2px solid white;
    `;
    
    // Add to body immediately
    document.body.appendChild(minimizeBtn);
    
    // Add click functionality
    minimizeBtn.addEventListener('click', function() {
      const dfMessenger = document.querySelector('df-messenger');
      if (dfMessenger) {
        dfMessenger.classList.toggle('minimized');
        minimizeBtn.innerHTML = dfMessenger.classList.contains('minimized') ? '+' : '−';
        minimizeBtn.title = dfMessenger.classList.contains('minimized') ? 'Expand Chat' : 'Minimize Chat';
        
        // Update button position
        if (dfMessenger.classList.contains('minimized')) {
          minimizeBtn.style.top = 'calc(100vh - 80px)';
        } else {
          minimizeBtn.style.top = '50vh';
        }
      }
    });
    
    // Add hover effects
    minimizeBtn.addEventListener('mouseenter', function() {
      this.style.background = '#007fa4';
      this.style.transform = 'scale(1.1)';
    });
    
    minimizeBtn.addEventListener('mouseleave', function() {
      this.style.background = '#00bbf0';
      this.style.transform = 'scale(1)';
    });
  }
  
  // Create button immediately
  createMinimizeButton();
  
  // Also try to add it when df-messenger loads
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'childList') {
        const dfMessenger = document.querySelector('df-messenger');
        if (dfMessenger && !minimizeBtn) {
          createMinimizeButton();
        }
      }
    });
  });
  
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
  
  // Fallback: check periodically
  setTimeout(function() {
    if (!minimizeBtn) {
      createMinimizeButton();
    }
  }, 1000);
});
</script>

<script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>
{% endblock %} 